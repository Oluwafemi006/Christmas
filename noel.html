<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joyeux NoÃ«l !</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #312e81 100%);
            overflow: hidden;
        }
        
        .snowflake {
            position: absolute;
            top: -10px;
            color: white;
            font-size: 1em;
            user-select: none;
            pointer-events: none;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
        
        .glow {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8),
                         0 0 20px rgba(255, 255, 255, 0.6),
                         0 0 30px rgba(255, 215, 0, 0.4);
        }
        
        .fade-in {
            animation: fadeIn 1s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center">
    <div id="snowContainer"></div>
    
    <!-- Ã‰cran d'accueil -->
    <div id="welcomeScreen" class="text-center fade-in">
        <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-12 shadow-2xl border border-white/20 max-w-md mx-4">
            <div class="text-6xl mb-6 shake">ğŸ„</div>
            <h1 class="text-4xl font-bold text-white mb-6 glow">Joyeux NoÃ«l !</h1>
            <p class="text-white/90 mb-8 text-lg">Entrez votre prÃ©nom pour recevoir vos vÅ“ux</p>
            <input 
                type="text" 
                id="nameInput" 
                placeholder="Votre prÃ©nom..." 
                class="w-full px-6 py-3 rounded-full text-center text-lg font-medium focus:outline-none focus:ring-4 focus:ring-yellow-400/50 mb-6"
            >
            <button 
                id="submitBtn"
                class="w-full bg-gradient-to-r from-red-500 to-green-500 text-white font-bold py-3 px-8 rounded-full text-lg hover:scale-105 transition-transform shadow-lg"
            >
                DÃ©couvrir mes vÅ“ux âœ¨
            </button>
        </div>
    </div>
    
    <!-- Ã‰cran de vÅ“ux -->
    <div id="greetingScreen" class="text-center hidden">
        <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-12 shadow-2xl border border-white/20 max-w-2xl mx-4 fade-in">
            <div class="text-8xl mb-8 pulse">ğŸ…</div>
            <h1 class="text-5xl font-bold text-white mb-4 glow" id="greetingText"></h1>
            <p class="text-2xl text-yellow-300 mb-8">Joyeux NoÃ«l !</p>
            <div class="text-white/90 text-lg space-y-4 mb-8">
                <p>âœ¨ Que cette pÃ©riode festive vous apporte joie et bonheur</p>
                <p>ğŸ Que tous vos rÃªves se rÃ©alisent</p>
                <p>â­ Passez de merveilleuses fÃªtes en famille</p>
            </div>
            <div class="flex gap-4 justify-center text-4xl mb-6">
                <span class="animate-bounce">ğŸ„</span>
                <span class="animate-bounce" style="animation-delay: 0.1s">ğŸ</span>
                <span class="animate-bounce" style="animation-delay: 0.2s">â›„</span>
                <span class="animate-bounce" style="animation-delay: 0.3s">ğŸŒŸ</span>
            </div>
            <button 
                id="restartBtn"
                class="bg-white/20 text-white font-semibold py-2 px-6 rounded-full hover:bg-white/30 transition-all"
            >
                Recommencer
            </button>
        </div>
    </div>
    
    <audio id="bgMusic" loop>
        <source src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js" type="audio/mpeg">
    </audio>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script>
        // CrÃ©ation de la neige
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.innerHTML = 'â„';
            snowflake.style.left = Math.random() * 100 + '%';
            snowflake.style.animationDuration = Math.random() * 3 + 5 + 's';
            snowflake.style.opacity = Math.random();
            snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';
            document.getElementById('snowContainer').appendChild(snowflake);
            
            setTimeout(() => snowflake.remove(), 8000);
        }
        
        setInterval(createSnowflake, 200);
        
        // Musique de NoÃ«l avec Tone.js
        let synth;
        let isPlaying = false;
        
        function playChristmasMusic() {
            if (isPlaying) return;
            isPlaying = true;
            
            synth = new Tone.PolySynth(Tone.Synth, {
                oscillator: { type: "triangle" },
                envelope: { attack: 0.02, decay: 0.1, sustain: 0.3, release: 1 }
            }).toDestination();
            
            const melody = [
                { note: "C4", duration: "4n" },
                { note: "G4", duration: "4n" },
                { note: "F4", duration: "4n" },
                { note: "E4", duration: "4n" },
                { note: "D4", duration: "4n" },
                { note: "C4", duration: "4n" },
                { note: "G4", duration: "4n" },
                { note: "E4", duration: "2n" }
            ];
            
            let index = 0;
            function playNote() {
                if (!isPlaying) return;
                const { note, duration } = melody[index];
                synth.triggerAttackRelease(note, duration);
                index = (index + 1) % melody.length;
                setTimeout(playNote, Tone.Time(duration).toMilliseconds());
            }
            
            Tone.start();
            playNote();
        }
        
        // Gestion des Ã©crans
        const nameInput = document.getElementById('nameInput');
        const submitBtn = document.getElementById('submitBtn');
        const welcomeScreen = document.getElementById('welcomeScreen');
        const greetingScreen = document.getElementById('greetingScreen');
        const greetingText = document.getElementById('greetingText');
        const restartBtn = document.getElementById('restartBtn');
        
        submitBtn.addEventListener('click', () => {
            const name = nameInput.value.trim();
            if (name) {
                greetingText.textContent = `${name}, nous vous souhaitons un`;
                welcomeScreen.classList.add('hidden');
                greetingScreen.classList.remove('hidden');
                playChristmasMusic();
            }
        });
        
        nameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                submitBtn.click();
            }
        });
        
        restartBtn.addEventListener('click', () => {
            greetingScreen.classList.add('hidden');
            welcomeScreen.classList.remove('hidden');
            nameInput.value = '';
            isPlaying = false;
            if (synth) {
                synth.dispose();
            }
        });
    </script>
</body>
</html>